# 準備

GitHub repositoryを準備して、Claude Code Actionsを呼び出せる状態を作るのが最初の目的です。

次図の流れで進んでいきます。

1. このGitHub Repositoryをfork
2. GitHub Pagesの有効化
3. Claude GitHub Appのインストール
4. Repository SecretにAnthropic API KEYの設定
5. Claude Code Actionsが動くか実験

## 1. GitHub Repositoryをfork

下図の**fork**をクリックすると、repositoryをコピーできます。

---
![forkボタン](/docs/images/1.1.png)
---

必要であればOwnerに自分を選択して、**Create fork**をクリックしてください。

---
![Create fork](/docs/images/1.2.png)
---

## 2. GitHub Pagesの有効化

**ここからは、forkして作成された自分のrepositoryで作業をします。**

まずはGitHub Actionsが有効化されているか確認します。

`Settings` > `Actions` > `General` と遷移し、下図のように **Allow all actions and reusable workflows**が選択されていることを確認してください。

---
![Allow Actions](/docs/images/1.3.png)
---

続いてGitHub Pagesの有効化と自動デプロイのための設定を行います。

`Settings` > `Pages` と遷移し、**Build and deployment**のSourceに`GitHub Actions`が選択されている状態にしてください。

---
![GitHub Actions](/docs/images/1.4.png)
---

この設定により、AIが書いたコードを取り込んだ時にGitHub Pagesに自動で反映されるようになります。

## 3. Claude GitHub Appのインストール

Claude CodeをGitHub Actionsとして利用するために、[Claude GitHub App](https://github.com/apps/claude)をインストールします。

このリンクのページを表示すると、次のような画面になるので、`Configure`をクリックします。

---
![Claude GitHub App](/docs/images/1.5.png)
---

すると、自分のGitHubユーザー名が表示されている行があるので、その行をクリックします。

---
![Claude Configure](/docs/images/1.6.png)
---

Claude GitHub Appを全てのrepositoryにインストールするか、repositoryを選択してインストールするか選べます。

どちらでも良いですが、ここではrepositoryを選択することにします。

`Only select repositories`を選択し、forkしたrepositoryを選んで`Install & Authorize`をクリックします。

---
![Install](/docs/images/1.7.png)
---

クリックするとClaudeへのログインを求められるページに遷移しますが、特にログインの必要はありません。

forkしたrepositoryに戻り、 `Settings` > `GitHub Apps` のリストに **Claude**が表示されていればokです。

---
![Claude](/docs/images/1.8.png)
---

## 4. Anthropic API KEYの設定

研修で利用するAPI KEYは当日お知らせします。

`Settings` > `Secrets and variables` > `Actions` から、 `New repository secret`をクリックします。

![secret](/docs/images/1.9.png)

Nameには`ANTHROPIC_API_KEY`、Secretには知らされたAPI KEYを入力してください。

![key](/docs/images/1.10.png)

## 5. Claude Code Actionsが動くか実験

試しに何か簡単なタスクを実施させてみましょう。

GitHubの `Issues`タブから、新しいIssueを作成するために、`New Issue`をクリックします。

![New Issue](/docs/images/1.11.png)

今回はサンプルとして、TODO管理をするアプリケーションを作ってみます。

タイトルを「TODOアプリの作成」にして、descriptionに以下のように `@claude` をつけてClaudeにやってほしいことを書きます。

```
@claude

トップページに次の機能を持つTODO管理アプリを作成して

- タスクの作成、編集、削除ができる
- タスクにサブタスクを作成できる
- タスクとサブタスクにはPending, Running, Completedの3つのステータスを設定できる
```

![TODO Issue](/docs/images/1.12.png)

この `@claude` とつけることが、このrepositoryのセットアップにおいて様々な場面でClaude Code Actionsを実行するトリガーになっています。

うまく実行できていると、次のようにIssueにClaude Code Actionsの実行状況が追記されます。

![Claude Code Issue](/docs/images/1.13.png)

これで、Claude Code Actionsが必要なコードを実装してくれたので、どのようなコードが書かれたのか確認します。

特にチームで開発する際に、GitHubでは開発したコードを反映させるために **Pull Request**という機能を用います。

上記Claude Code Actionsからの追記コメントの中に **Create PR →**というリンクがあるのでクリックします。

![Create PR](/docs/images/1.14.png)

この画面では下方向にスクロールしていくと、どのようなコードをClaude Code Actionsが実装したのか確認できるので、興味のある方はご覧ください。

今回はPull Request(PR)については何も変更せずに `Create pull request` をクリックします。

PRが作成されたら5分程度待ってからPRのページをもう1度見てください。

すると、書いた覚えのないPRについての要約や説明が追記されていて、実装されたコードについての指摘事項が作成されているはずです。

詳しい活用方法はまた来週以降にやるとして、今日はとりあえず下の方にスクロールして、`Merge pull request`をクリックします。

![merge pr](/docs/images/1.15.png)

今回のrepositoryの設定では、repositoryの`main`ブランチにPRがmergeされると、自動でGitHub Pagesにコードが反映されます。

コード反映の進捗状況は Actions というタブから実行状況を確認できます。これまでのClaude Code Actionsの実行も全てGitHub Actionsを活用していたので、過去のタスクについても確認できます。

![Actions Tab](/docs/images/1.16.png)

最新のActions実行が完了したら、早速GitHub Pagesを見にいきましょう。

`Settings` > `Pages` から、自分のGitHub PagesのURLが確認できるので、`Visit site`からアプリケーションを確認してみましょう。

これで準備完了です。

## 6 まとめ

最後に、準備で何をやったのかまとめておきます。

このrepositoryには、次の3つのGitHub Actionsが設定されていました。

- `@claude`とつけてissueやコメントを書くとClaude Code Actionsがその場面に応じて動作する
- Pull requestが作成されると、PR Agentが動作してPRの内容を確認、要約、レビューをする
- `main`ブランチにコードがcommitされるとGitHub Pagesにアプリケーションが反映される

これらは全て [.github/workflows](/.github/workflows/) ディレクトリに定義されています。

従来からソフトウェア開発においては様々な自動化がなされていますが、このフローにAIが組み込まれただけと捉えることもできます。

Claude Code ActionsやPR Agentだけがこのフローを確立できるわけではないので、自分の好みやプロジェクトの状況に合わせて利用するソフトウェアを検討してみてください。
